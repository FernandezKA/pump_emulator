Эмулятор валидного ответа для насоса

Устройство должно детектировать сигнал на входе с точностью в 1 мс, и по результатам совершать следующие действия:
	1. Генерация сигнала ответа в случае обнаружения валидной последовательности
	2. генерация ШИМ - сигнала при обнаружении входного сигнала ШИМ. Коэффициент заполненения определяется в документе ниже. 
	3. при отсутствии сигнала устройство должно через 15 секунд начать генерацию ШИМ сигнала с коэффициентом заполненения 10%. 
1. Валидная входная последовательности имеет следующие тайминги:
{{140, 0}, {160, 1}, {140, 0}, {160, 1}, {140, 0}, {160, 1}}. 
В случае совпадения с девиацией в 10% устройство должно выдать на линию сигнал ответа. 
{{180, 1}, {100, 0}, {100, 1}, {10, 0}, {190, 1}, {100, 0}}. 

2. В случае обнаружения сигнала ШИМ на линии необходимо начать генерацию двух сигналов:
	2.1. ШИМ сигнал с дискретным шагом заполнения (10%, 50%). В случае коэффициента заполненения меньше 50% на входе - коэффициент заполненения 10%. В случае значения свыше 10%, коэффициент заполненения 50%. 
	2.2. Дублированный ШИМ сигнал со входа, с эквивалентным значением коэффициента заполненения. 
3. Отсутствие сигнала определяется с периодом 1 сек., исходное состояние линии - подтянута к Vdd. Любое изменение состояние линии трактуется как сигнал, даже если он не является ШИМ, или запросом ответа. 